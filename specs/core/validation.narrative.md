# Validation

## Intent

–í–∞–ª–∏–¥–∞—Ü–∏—è markdown –ø–æ—Å–ª–µ –æ–ø–µ—Ä–∞—Ü–∏–π –∑–∞–ø–∏—Å–∏ (create_note, update_note, update_section, append_note).

–¶–µ–ª—å: –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—Ç–∏—Ç—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–ª–æ–º–∞–Ω–Ω–æ–≥–æ markdown, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–∏–≤–µ–¥—ë—Ç –∫ –ø—Ä–æ–±–ª–µ–º–∞–º —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ –≤ Obsidian.

–ë–∏–±–ª–∏–æ—Ç–µ–∫–∞: pymarkdownlnt.

–ü—Ä–æ–≤–µ—Ä–∫–∏:
- –¢–∞–±–ª–∏—Ü—ã: –ø—É—Å—Ç–∞—è —Å—Ç—Ä–æ–∫–∞ –ø–µ—Ä–µ–¥ —Ç–∞–±–ª–∏—Ü–µ–π
- Code blocks: –∑–∞–∫—Ä—ã—Ç–∏–µ ```
- –ó–∞–≥–æ–ª–æ–≤–∫–∏ –≤–Ω—É—Ç—Ä–∏ code blocks: –ª–æ–∂–Ω—ã–µ # (–∫–æ–≥–¥–∞ code block –Ω–µ –∑–∞–∫—Ä—ã—Ç, –ø–æ—Å–ª–µ–¥—É—é—â–∏–µ # –ø–∞—Ä—Å—è—Ç—Å—è –∫–∞–∫ –∑–∞–≥–æ–ª–æ–≤–∫–∏)

## Clarifications

Q1: pymarkdown –Ω–µ –∏–º–µ–µ—Ç –≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ–≥–æ –ø—Ä–∞–≤–∏–ª–∞ –¥–ª—è "–ø—É—Å—Ç–∞—è —Å—Ç—Ä–æ–∫–∞ –ø–µ—Ä–µ–¥ —Ç–∞–±–ª–∏—Ü–µ–π" ‚Äî —Ç–æ–ª—å–∫–æ MD031 (blanks-around-fences) –∏ MD032 (blanks-around-lists). –í–∞—Ä–∏–∞–Ω—Ç—ã:
- a) –ù–∞–ø–∏—Å–∞—Ç—å –∫–∞—Å—Ç–æ–º–Ω—ã–π –ø–ª–∞–≥–∏–Ω –¥–ª—è pymarkdown
- b) –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É —Ç–∞–±–ª–∏—Ü –≤—Ä—É—á–Ω—É—é (regex/–ø–∞—Ä—Å–∏–Ω–≥)
- c) –û—Ç–∫–∞–∑–∞—Ç—å—Å—è –æ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ç–∞–±–ª–∏—Ü
–ö–∞–∫–æ–π –≤–∞—Ä–∏–∞–Ω—Ç?
A1: –¢–æ—á–Ω–æ –ø—Ä–æ–≤–µ—Ä—è–µ–º —Ç–∞–±–ª–∏—Ü—ã. –í—ã–±–µ—Ä–∏ —Å–∞–º–æ–µ –ø—Ä–æ—Å—Ç–æ–µ —Ä–µ—à–µ–Ω–∏–µ. –¢—ã –∂–µ –º–æ–∂–µ—à—å –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –ø–æ–ª–æ–∂–µ–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã? –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å —á—Ç–æ –µ—Å—Ç—å —Ç–∞–±–ª–∏—Ü–∞ –ø–æ –ø—Ä–∞–≤–∏–ª–∞–º MD? –ù—É –∏ –ø—Ä–æ–≤–µ—Ä—è–π —á—Ç–æ –µ—Å—Ç—å –æ—Ç—Å—É–ø –æ—Ç —Ç–µ–∫—Å—Ç–∞ –≤—ã—à–µ

Q2: pymarkdown –Ω–µ –¥–µ—Ç–µ–∫—Ç–∏—Ä—É–µ—Ç unclosed code blocks –∫–∞–∫ lint rule ‚Äî —ç—Ç–æ –æ—à–∏–±–∫–∞ –ø–∞—Ä—Å–∏–Ω–≥–∞. –í–∞—Ä–∏–∞–Ω—Ç—ã:
- a) –û—Ç–ª–∞–≤–ª–∏–≤–∞—Ç—å –æ—à–∏–±–∫–∏ –ø–∞—Ä—Å–∏–Ω–≥–∞ pymarkdown
- b) –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –∑–∞–∫—Ä—ã—Ç–∏—è ``` –≤—Ä—É—á–Ω—É—é (–ø–æ–¥—Å—á—ë—Ç –ø–∞—Ä)
- c) –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥—Ä—É–≥—É—é –±–∏–±–ª–∏–æ—Ç–µ–∫—É –¥–ª—è —ç—Ç–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏
–ö–∞–∫–æ–π –≤–∞—Ä–∏–∞–Ω—Ç?
A2: –í–∞—Ä–∏–∞–Ω—Ç b ‚Äî –ø—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–∫—Ä—ã—Ç–∏—è –≤—Ä—É—á–Ω—É—é (–ø–æ–¥—Å—á—ë—Ç –ø–∞—Ä). –ï—Å–ª–∏ –µ—Å—Ç—å –≥–æ—Ç–æ–≤–æ–µ —Ä–µ—à–µ–Ω–∏–µ ‚Äî –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≥–æ—Ç–æ–≤–æ–µ, –∏–Ω–∞—á–µ —Å—á–∏—Ç–∞—Ç—å –ø–∞—Ä—ã.

Q3: "–ó–∞–≥–æ–ª–æ–≤–∫–∏ –≤–Ω—É—Ç—Ä–∏ code blocks" ‚Äî —ç—Ç–æ —Å–∏–º–ø—Ç–æ–º unclosed code block (—Ç–µ–∫—Å—Ç –ø–æ—Å–ª–µ –Ω–µ–∑–∞–∫—Ä—ã—Ç–æ–≥–æ ``` –ø–∞—Ä—Å–∏—Ç—Å—è –∫–∞–∫ –æ–±—ã—á–Ω—ã–π markdown). –ï—Å–ª–∏ —Ä–µ—à–∏–º Q2, —ç—Ç–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–∫—Ä—ã–≤–∞–µ—Ç—Å—è. –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –∏–ª–∏ —É—Ç–æ—á–Ω–∏—Ç–µ –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è.
A3: –î–∞, –≤—Å–µ–≥–¥–∞ —Ä–∞–±–æ—Ç–∞–µ–º —Å –ø–µ—Ä–≤–æ–ø—Ä–∏—á–∏–Ω–∞–º–∏.

Q4: –ü–æ–≤–µ–¥–µ–Ω–∏–µ –ø—Ä–∏ –æ—à–∏–±–∫–µ –≤–∞–ª–∏–¥–∞—Ü–∏–∏:
- a) –ë–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –æ–ø–µ—Ä–∞—Ü–∏—é –∑–∞–ø–∏—Å–∏, –≤—ã–±—Ä–∞—Å—ã–≤–∞—Ç—å –∏—Å–∫–ª—é—á–µ–Ω–∏–µ
- b) –ó–∞–ø–∏—Å–∞—Ç—å, –Ω–æ –≤–µ—Ä–Ω—É—Ç—å warning –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
- c) –ó–∞–ø–∏—Å–∞—Ç—å, –ª–æ–≥–∏—Ä–æ–≤–∞—Ç—å warning
–ö–∞–∫–æ–π –≤–∞—Ä–∏–∞–Ω—Ç?
A4: - b) –ó–∞–ø–∏—Å–∞—Ç—å, –Ω–æ –≤–µ—Ä–Ω—É—Ç—å warning –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ –æ–ø–µ—Ä–∞—Ü–∏–∏

Q5: –í–∞–ª–∏–¥–∞—Ü–∏—è –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –∫–æ –≤—Å–µ–º—É –∫–æ–Ω—Ç–µ–Ω—Ç—É –∑–∞–º–µ—Ç–∫–∏ –∏–ª–∏ —Ç–æ–ª—å–∫–æ –∫ –∏–∑–º–µ–Ω—è–µ–º–æ–π —á–∞—Å—Ç–∏ (–¥–ª—è append_note, update_section)?
A5: –ö–æ –≤—Å–µ–º—É

---

## Extension: English-only naming

–ù–æ–≤—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è:
- Note names must be English only (no Cyrillic)
- Heading names (## / ### etc.) must be English only

Q6: –ü–∞—Ç—Ç–µ—Ä–Ω –¥–ª—è "English only" ‚Äî —á—Ç–æ –∏–º–µ–Ω–Ω–æ —Ä–∞–∑—Ä–µ—à–µ–Ω–æ?

- a) –¢–æ–ª—å–∫–æ ASCII letters (a-zA-Z) + numbers + spaces + –±–∞–∑–æ–≤–∞—è –ø—É–Ω–∫—Ç—É–∞—Ü–∏—è
- b) –ü–æ–ª–Ω—ã–π Latin Extended (–≤–∫–ª—é—á–∞—è √±, √º –∏ —Ç.–¥.)
- c) –°—Ç—Ä–æ–≥–æ ASCII printable (0x20-0x7E)

–ö–∞–∫–æ–π –≤–∞—Ä–∏–∞–Ω—Ç?
A6: –í–∞—Ä–∏–∞–Ω—Ç –ê + —Å–º–∞–π–ª–∏–∫–∏ Obsidian Tasks: ‚ûï‚è≥üõ´üìÖ‚úÖ‚ùå‚è¨üîΩüîº‚è´üî∫üîÅüèÅüÜî‚õî

Q7: –ö–æ–≥–¥–∞ –≤–∞–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å note names?

- a) –ü—Ä–∏ create() ‚Äî –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å —Å–æ–∑–¥–∞–Ω–∏–µ —Å –∫–∏—Ä–∏–ª–ª–∏—Ü–µ–π
- b) –ü—Ä–∏ create() ‚Äî —Å–æ–∑–¥–∞—Ç—å, –Ω–æ –≤–µ—Ä–Ω—É—Ç—å warning
- c) –û—Ç–¥–µ–ª—å–Ω—ã–π –º–µ—Ç–æ–¥ validate_name() –±–µ–∑ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –≤ create

–ö–∞–∫–æ–π –≤–∞—Ä–∏–∞–Ω—Ç?
A7: –í–∞—Ä–∏–∞–Ω—Ç –ê ‚Äî –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–∏ create() –∏ rename()

Q8: Headings ‚Äî –ø—Ä–æ–≤–µ—Ä—è—Ç—å –ø—Ä–∏ —Ç–æ–π –∂–µ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ —á—Ç–æ –∏ tables/code blocks?
A8: –î–∞, –ø—Ä–∏ –æ–±—â–µ–π –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –∫–æ–Ω—Ç–µ–Ω—Ç–∞

---

## Extension: Wikilinks section validation + heading blocking

–ù–æ–≤—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è:
- `[[Note#Section]]` ‚Äî —Å–µ–∫—Ü–∏—è –¥–æ–ª–∂–Ω–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞—Ç—å –≤ —Ü–µ–ª–µ–≤–æ–π –∑–∞–º–µ—Ç–∫–µ
- –ó–∞–≥–æ–ª–æ–≤–∫–∏ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å English-only (blocking, –∫–∞–∫ –¥–ª—è –∏–º—ë–Ω)

Q9: –°–µ–π—á–∞—Å cyrillic-heading ‚Äî —ç—Ç–æ warning. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Ö–æ—á–µ—Ç blocking error –∫–∞–∫ –¥–ª—è –∏–º—ë–Ω?
- a) Blocking error (–∫–∞–∫ validate_name) ‚Äî –∑–∞–ø–∏—Å—å –Ω–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç
- b) –û—Å—Ç–∞–≤–∏—Ç—å warning (–∑–∞–ø–∏—Å—å –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç, –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ)
A9: –î–∞–≤–∞–π Blocking error, –∞ —Ç–æ —Ç—ã —á–∞—Å—Ç–æ –∏–≥–Ω–æ—Ä–∏—à—å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è

Q10: Wikilinks `[[Note#Section]]` ‚Äî –∫–æ–≥–¥–∞ —Å–µ–∫—Ü–∏—è –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç:
- a) Warning (post-write, –∑–∞–ø–∏—Å—å –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç)
- b) Blocking error (–∑–∞–ø–∏—Å—å –Ω–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç)
A10: Blocking error

Q11: –î–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–µ–∫—Ü–∏–∏ –Ω—É–∂–µ–Ω –¥–æ—Å—Ç—É–ø –∫ Vault (—á—Ç–æ–±—ã –ø—Ä–æ—á–∏—Ç–∞—Ç—å —Ü–µ–ª–µ–≤—É—é –∑–∞–º–µ—Ç–∫—É). Validator —Å–µ–π—á–∞—Å stateless. –í–∞—Ä–∏–∞–Ω—Ç—ã:

**–ü—Ä–æ–±–ª–µ–º–∞**: `[[Note#Section]]` ‚Üí –Ω—É–∂–Ω–æ –æ—Ç–∫—Ä—ã—Ç—å `Note.md` –∏ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –µ—Å—Ç—å –ª–∏ –∑–∞–≥–æ–ª–æ–≤–æ–∫ `# Section`. Validator —Å–µ–π—á–∞—Å –ø–æ–ª—É—á–∞–µ—Ç —Ç–æ–ª—å–∫–æ `content: str`, –±–µ–∑ –¥–æ—Å—Ç—É–ø–∞ –∫ —Ñ–∞–π–ª–∞–º.

**a) –ü–µ—Ä–µ–¥–∞–≤–∞—Ç—å Vault –≤ validate(content, vault)**
- (+) –ï–¥–∏–Ω–∞—è —Ç–æ—á–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏
- (+) –ü—Ä–æ—Å—Ç–æ–π API: –æ–¥–∏–Ω –º–µ—Ç–æ–¥ validate() –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –≤—Å—ë
- (-) Validator —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –∑–∞–≤–∏—Å–∏–º –æ—Ç Vault (coupling)
- (-) validate() –º–µ–Ω—è–µ—Ç —Å–∏–≥–Ω–∞—Ç—É—Ä—É ‚Äî –ª–æ–º–∞–µ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∫–æ–¥

**b) –û—Ç–¥–µ–ª—å–Ω—ã–π –º–µ—Ç–æ–¥ validate_wikilinks(content, vault)**
- (+) Validator –æ—Å—Ç–∞—ë—Ç—Å—è stateless –¥–ª—è –æ—Å—Ç–∞–ª—å–Ω—ã—Ö –ø—Ä–æ–≤–µ—Ä–æ–∫
- (+) –Ø–≤–Ω–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ: validate() ‚Äî markdown, validate_wikilinks() ‚Äî —Å—Å—ã–ª–∫–∏
- (-) –î–≤–∞ –≤—ã–∑–æ–≤–∞ –≤–º–µ—Å—Ç–æ –æ–¥–Ω–æ–≥–æ –≤ Operations
- (-) –í–∞–ª–∏–¥–∞—Ü–∏—è —Ä–∞–∑–±–∏—Ç–∞ –Ω–∞ —á–∞—Å—Ç–∏

**c) –ü—Ä–æ–≤–µ—Ä–∫—É –¥–µ–ª–∞—Ç—å –≤ Operations, –Ω–µ –≤ Validator**
- (+) Operations —É–∂–µ –∏–º–µ–µ—Ç Vault
- (+) Validator –æ—Å—Ç–∞—ë—Ç—Å—è —á–∏—Å—Ç—ã–º (—Ç–æ–ª—å–∫–æ markdown)
- (-) –õ–æ–≥–∏–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ —Ä–∞–∑–º–∞–∑–∞–Ω–∞ –ø–æ –¥–≤—É–º –º–µ—Å—Ç–∞–º
- (-) –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ: –∫–∞–∂–¥–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è (create, update, append) –¥–æ–ª–∂–Ω–∞ –≤—ã–∑—ã–≤–∞—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è**: –í–∞—Ä–∏–∞–Ω—Ç (b) ‚Äî –±–∞–ª–∞–Ω—Å –º–µ–∂–¥—É —á–∏—Å—Ç–æ—Ç–æ–π –∏ —É–¥–æ–±—Å—Ç–≤–æ–º.

A11: –î–µ–ª–∞–µ–º –≤ Operations. –ê–ª–≥–æ—Ä–∏—Ç–º:
1. vault.extract_wikilinks(content) ‚Üí —Å–ø–∏—Å–æ–∫ —Å—Å—ã–ª–æ–∫
2. –ü–∞—Ä—Å–∏–º `[[Note#Section]]` ‚Üí Note + Section
3. –ü—Ä–æ–≤–µ—Ä—è–µ–º Note —Å—É—â–µ—Å—Ç–≤—É–µ—Ç (vault.get_note)
4. –ï—Å–ª–∏ –µ—Å—Ç—å Section ‚Üí get_headings(Note) –∏ –∏—â–µ–º heading
5. –ù–µ—Ç ‚Üí raise BrokenLinkError

Q12: –ë–∏—Ç—ã–µ wikilinks `[[NonExistentNote]]` (–±–µ–∑ —Å–µ–∫—Ü–∏–∏) ‚Äî —Ç–æ–∂–µ –ø—Ä–æ–≤–µ—Ä—è—Ç—å?
A12: Warning (forward reference –¥–æ–ø—É—Å—Ç–∏–º). Blocking —Ç–æ–ª—å–∫–æ –¥–ª—è `[[ExistingNote#NonExistentSection]]`.

Status: resolved
